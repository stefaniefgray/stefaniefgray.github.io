<!doctype><html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Odyssey.js Slides</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/x-icon" href="http://cartodb.github.io/odyssey.js/sandbox/favicon.png">
  <link rel="icon" type="image/png" href="http://cartodb.github.io/odyssey.js/sandbox/favicon.png">

  <link rel="stylesheet" href="http://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/themes/css/cartodb.css">
  <link rel="stylesheet" href="http://cartodb.github.io/odyssey.js/sandbox/css/slides.css">
  <script src="http://cartodb.github.io/odyssey.js/vendor/modernizr-2.6.2.min.js"></script>
</head>
<body>
  <div id="map" style="width: 100%; height: 100%;"></div>

  <div id="slides_container" style="display:block;">
    <div id="dots"></div>

    <div id="slides"></div>

    <ul id="navButtons">
      <li><a class="prev"></a></li>
      <li><a class="next"></a></li>
    </ul>
  </div>

  <div id="credits">
    <span class="title" id="title">Title</span>
    <span class="author"><strong id="author">By Name using</strong> <a href="http://cartodb.github.io/odyssey.js/">Odyssey.js</a><span>
  </span></span></div>

  <script src="http://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/cartodb.js"></script>
  <script src="http://cartodb.github.io/odyssey.js/dist/odyssey.js" charset="UTF-8"></script>

  <script>
    var resizePID;

    function clearResize() {
      clearTimeout(resizePID);
      resizePID = setTimeout(function() { adjustSlides(); }, 100);
    }

    if (!window.addEventListener) {
      window.attachEvent("resize", function load(event) {
        clearResize();
      });
    } else {
      window.addEventListener("resize", function load(event) {
        clearResize();
      });
    }

    function adjustSlides() {
      var container = document.getElementById("slides_container"),
          slide = document.querySelectorAll('.selected_slide')[0];

      if (slide) {
        if (slide.offsetHeight+169+40+80 >= window.innerHeight) {
          container.style.bottom = "80px";

          var h = container.offsetHeight;

          slide.style.height = h-169+"px";
          slide.classList.add("scrolled");
        } else {
          container.style.bottom = "auto";
          container.style.minHeight = "0";

          slide.style.height = "auto";
          slide.classList.remove("scrolled");
        }
      }
    }

    var resizeAction = O.Action(function() {
      function imageLoaded() {
        counter--;

        if (counter === 0) {
          adjustSlides();
        }
      }
      var images = $('img');
      var counter = images.length;

      images.each(function() {
        if (this.complete) {
          imageLoaded.call( this );
        } else {
          $(this).one('load', imageLoaded);
        }
      });
    });

    function click(el) {
      var element = O.Core.getElement(el);
      var t = O.Trigger();

      // TODO: clean properly
      function click() {
        t.trigger();
      }

      if (element) element.onclick = click;

      return t;
    }

    O.Template({
      init: function() {
        var seq = O.Triggers.Sequential();

        var baseurl = this.baseurl = 'http://{s}.api.cartocdn.com/base-light/{z}/{x}/{y}.png';
        var map = this.map = L.map('map').setView([0, 0.0], 4);
        var basemap = this.basemap = L.tileLayer(baseurl, {
          attribution: 'data OSM - map CartoDB'
        }).addTo(map);

        // enanle keys to move
        O.Keys().on('map').left().then(seq.prev, seq)
        O.Keys().on('map').right().then(seq.next, seq)

        click(document.querySelectorAll('.next')).then(seq.next, seq)
        click(document.querySelectorAll('.prev')).then(seq.prev, seq)

        var slides = O.Actions.Slides('slides');
        var story = O.Story()

        this.story = story;
        this.seq = seq;
        this.slides = slides;
        this.progress = O.UI.DotProgress('dots').count(0);
      },

      update: function(actions) {
        var self = this;

        if (!actions.length) return;

        this.story.clear();

        if (this.baseurl && (this.baseurl !== actions.global.baseurl)) {
          this.baseurl = actions.global.baseurl || 'http://0.api.cartocdn.com/base-light/{z}/{x}/{y}.png';

          this.basemap.setUrl(this.baseurl);
        }

        if (this.cartoDBLayer && ("http://"+self.cartoDBLayer.options.user_name+".cartodb.com/api/v2/viz/"+self.cartoDBLayer.options.layer_definition.stat_tag+"/viz.json" !== actions.global.vizjson)) {
          this.map.removeLayer(this.cartoDBLayer);

          this.cartoDBLayer = null;
          this.created = false;
        }

        if (actions.global.vizjson && !this.cartoDBLayer) {
          if (!this.created) { // sendCode debounce < vis loader
            cdb.vis.Loader.get(actions.global.vizjson, function(vizjson) {
              self.map.fitBounds(vizjson.bounds);

              cartodb.createLayer(self.map, vizjson)
                .done(function(layer) {
                  self.cartoDBLayer = layer;

                  var sublayer = layer.getSubLayer(0),
                      layer_name = layer.layers[0].options.layer_name,
                      filter = actions.global.cartodb_filter ? " WHERE "+actions.global.cartodb_filter : "";

                  sublayer.setSQL("SELECT * FROM "+layer_name+filter)

                  self.map.addLayer(layer);

                  self._resetActions(actions);
                }).on('error', function(err) {
                  console.log("some error occurred: " + err);
                });
            });

            this.created = true;
          }

          return;
        }

        this._resetActions(actions);
      },

      _resetActions: function(actions) {
        // update footer title and author
        var title_ = actions.global.title === undefined ? '' : actions.global.title,
            author_ = actions.global.author === undefined ? 'Using' : 'By '+actions.global.author+' using';

        document.getElementById('title').innerHTML = title_;
        document.getElementById('author').innerHTML = author_;
        document.title = title_ + " | " + author_ +' Odyssey.js';

        var sl = actions;

        document.getElementById('slides').innerHTML = ''
        this.progress.count(sl.length);

        // create new story
        for(var i = 0; i < sl.length; ++i) {
          var slide = sl[i];
          var tmpl = "<div class='slide' style='diplay:none'>";

          tmpl += slide.html();
          tmpl += "</div>";
          document.getElementById('slides').innerHTML += tmpl;

          this.progress.step(i).then(this.seq.step(i), this.seq)

          var actions = O.Parallel(
            this.slides.activate(i),
            slide(this),
            this.progress.activate(i),
            resizeAction
          );

          actions.on("finish.app", function() {
            adjustSlides();
          });

          this.story.addState(
            this.seq.step(i),
            actions
          )
        }

        this.story.go(this.seq.current());
      },

      changeSlide: function(n) {
        this.seq.current(n);
      }
    });
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20934186-21', 'cartodb.github.io');
    ga('send', 'pageview');
  </script>

  <script type="text/javascript" src="http://fast.fonts.net/jsapi/3af16084-ba56-49ca-b37d-0b49b59e1927.js"></script>

<script id="md_template" type="text/template">```
-baseurl: "https://2.maps.nlp.nokia.com/maptile/2.1/maptile/newest/normal.day/{z}/{x}/{y}/256/png8?lg=eng&token=A7tBPacePg9Mj_zghvKt9Q&app_id=KuYppsdXZznpffJsKT24"
-title: "Active Spaces NYC"
-author: "Stefanie Gray"
```

#Active Spaces NYC
```
- center: [40.6884, -74.0451]
- zoom: 11
```

NYC benefits from a wealth of public playgrounds, pools and athletic fields and facilities. From soccer fields to bocce courts, the city offers numerous ways to have fun and get in shape.

This map uses data from NYC Open Data to show every public active space, all in one place.

Use the arrows to zoom between boroughs, and click or mouse over each feature to learn more.

Designed, developed and written by Stefanie Gray.

#The Bronx
```
- center: [40.8504, -73.8844]
- zoom: 13
```

The Bronx is the third most densely populated county in the U.S., but approximately one-quarter of its land area belongs to parks. 

Van Cortlandt Park, Bronx Park (home to the famed Bronx Zoo), Pelham Bay Park and Orchard Beach are the borough's easily accessible crown jewels, offering innumerable ways to surround oneself in beauty and feel as though you're lightyears away from the city.

![The Bronx](http://cdnnyrr.nyrr.org/sites/default/files/styles/rfl-testimonial-712x385/public/youth-programs/2012/nyrrxc39.png?itok=Nb-drsVT)
Members of the New York Road Runners in Van Cortlandt Park. (credit: NYRR.org)

#Brooklyn
```
- center: [40.6572, -73.9445]
- zoom: 12
```
You probably don't need to be told how hip Brooklyn is, but did you know that it's the borough with the most skate parks? Brooklyn is also known for being bike-friendly, and you can admire the Manhattan skyline while touring the waterfront greenway or even bike from Prospect Park down to Marine Park and the Rockaways. And check out all of the basketball courts -- there's a reason Brooklyn has its own NBA team.

![Brooklyn](https://brooklynbridgepark.s3.amazonaws.com/p/1294/profiles/carousel-large.jpg)
A slam dunk at Brooklyn Bridge Park (credit: BrooklynBridgePark.org).

#Manhattan
```
- center: [40.7844, -73.9670]
- zoom: 12
```
Manhattan may be the heart of the concrete jungle, but as Ella Fitzgerald sang, it's an "isle of joy." Though Central Park may be its best known, the Lower East Side and Harlem are dotted with basketball and handball courts - and Riverside Park, Inwood Hill Park and Fort Tyron Park will give you quite a workout when running up or sledding down incredible slopes.
![Manhattan](http://stefaniefgray.com/images/sledding.jpg)Stefanie Gray, Douglas Spangler and Sam Rubenfeld sledding in Riverside Park, February 2014 (credit: self).

#Randall's Island
```
- center: [40.7911, -73.9297]
- zoom: 15
```
It wouldn't be fair to cover NYC's athletic facilities without giving Randall's Island a mention of its own. Randall's Island and Ward's Island are connected to one another, and are considered part of the borough of Manhattan. Not only is the island covered in tennis courts and soccer and softball fields, but it boasts a state-of-the-art 25 acre golf course -- which includes mini-golf!

You can get to Randall's Island by taking the M35 from Lexington Ave. and 125th street, or by walking or riding your bike over one of the many footbridges connecting it to Manhattan, the Bronx and Queens.
![Randall's Island](http://randallsisland.org/image/home-page/island.jpg)
A view of the sports fields on Randall's Island (credit: RandallsIsland.org).

#Queens
```
- center: [40.6812, -73.8628]
- zoom: 11
```
As the famous mural painted on a handball court in Jackson Heights says: Queens is the future. The most diverse county in the U.S. is equally diverse when it comes to athletic opportunities free to the public. Whether you're diving into the gigantic Olympic-sized Astoria Pool, playing cricket in Kissena Corridor Park or surfing at Rockaway Beach, Queens will keep you on your feet.

Don't forget to drop by Flushing Meadows Park, home to two World's Fairs and the beautiful Queens Unisphere!
![Queens](http://assets.dnainfo.com/generated/photo/2014/06/new-queens-is-future-mural-1401810924.jpg/larger.jpg)
The "Queens is the Future" handball court (credit: DNAInfo).

#Staten Island
```
- center: [40.5741, -74.1699]
- zoom: 12
```
Staten Island is off the beaten path, but it's worth it: The Staten Island Greenbelt, a contiguous series of parks and open space, is approximately three times the size of Central Park. Moreover, the southeastern shore is nearly entirely lined with parks of its own. Don't let names like "Fresh Kills" and "Great Kills" scare you - 'kill' is an archaic Dutch word roughly translated to 'creek' or 'channel'.
![Staten Island](http://media.silive.com/the_staten_island_guide/photo/south-beach-with-vn-bridgejpg-82f3c70aef968764.jpg)
Staten Island's own South Beach (credit: SILive).</script></body></html>